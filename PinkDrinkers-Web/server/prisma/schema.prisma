generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       Int     @id @default(autoincrement())
  name     String?
  email    String  @unique
  password String
}

model avaliacao {
  id_avaliacao   Int  @id @default(autoincrement())
  nota_avaliacao Int?
}

model funcionario {
  id_funcionario    Int     @id @default(autoincrement())
  nome_funcionario  String? @db.Char
  login_funcionario String? @db.Char
  senha_funcionario String? @db.Char
}

model Item_estoque {
  id_itemestoque Int         @id @default(autoincrement())
  id_bebida      Int?
  Bebida         Bebida?     @relation(fields: [id_bebida], references: [id_bebida], onDelete: NoAction, onUpdate: NoAction)
  Reposicao      Reposicao[]
}

model item_totem {
  id_bebida    Int?
  id_totem     Int?
  id_itemtotem Int  @id @default(autoincrement())
}

model pagamento {
  id_pagamento Int  @id @default(autoincrement())
  id_venda     Int?
  status_venda Int?
}

model Reposicao {
  id_reposicao         Int           @id @default(autoincrement())
  status_reposicao     String?       @db.VarChar
  observacao_reposicao String?       @db.VarChar
  id_itemestoque       Int?
  id_totem             Int?
  data_reposicao       DateTime?     @db.Date
  item_estoque         Item_estoque? @relation(fields: [id_itemestoque], references: [id_itemestoque], onDelete: NoAction, onUpdate: NoAction)
  totem                Totem?        @relation(fields: [id_totem], references: [id_totem], onUpdate: NoAction)
}


model Totem {
  id_totem                          Int         @id @default(autoincrement())
  id_maquina                        Int?
  nome_totem                        String?     @db.Char(20)
  Maquina                           Maquina[]
  reposicao                         Reposicao[]
  Maquina_Totem_id_maquinaToMaquina Maquina?    @relation("Totem_id_maquinaToMaquina", fields: [id_maquina], references: [id_maquina], onDelete: NoAction, onUpdate: NoAction)
}

model venda {
  id_venda     Int       @id @default(autoincrement())
  id_itemtotem Int?
  valor_venda  Float?
  id_avaliacao Int?
  id_totem     Int?
  data_venda   DateTime? @db.Date
}

model Bebida {
  id_bebida    Int            @id @default(autoincrement())
  nome_bebida  String?
  tipo_bebida  String?
  valor_bebida Float?
  item_estoque Item_estoque[]
}

model Maquina {
  id_maquina                      Int     @id(map: "maquina_pkey") @default(autoincrement())
  status_maquina                  String?
  local_maquina                   String?
  id_totem                        Int?
  totem                           Totem?  @relation(fields: [id_totem], references: [id_totem], onUpdate: NoAction)
  Totem_Totem_id_maquinaToMaquina Totem[] @relation("Totem_id_maquinaToMaquina")
}
